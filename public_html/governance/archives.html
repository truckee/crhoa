<!DOCTYPE html>
<!--
 (c) GWB truckeesolutions@gmail.com

 For the full copyright and license information, please view the LICENSE
 file that was distributed with this source code.
-->
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Governance - Castle Rock HOA</title>
        <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
        <link rel="stylesheet" href="../assets/css/hoa.css">
    </head>
    <body>
        <div class="crossfade">
            <figure></figure>
            <figure></figure>
            <figure></figure>
            <figure></figure>
            <figure></figure>
        </div>
        <div class="container">
            <nav class="navbar navbar-expand-lg m-2 rounded-4 justify-content-center" style="background-color: #D6F4E5;">
                <div class="container-fluid">
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav me-auto mb-2 mb-lg-0 mx-auto">
                            <li class="nav-item">
                                <a class="nav-link active" style="color:#2922EB;" aria-current="page" href="/index.html">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" style="color:#2922EB;" href="/about_us/index.html">About us</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" style="color:#2922EB;" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    Governance
                                </a>
                                <ul class="dropdown-menu" style="background-color: #D6F4E5;">
                                    <li><a class="dropdown-item" href="/governance/people.html">People</a></li>
                                    <li><a class="dropdown-item" href="/governance/documents.html">Documents</a></li>
                                    <li><a class="dropdown-item" href="/governance/budget.html">Budget</a></li>
                                    <li><a class="dropdown-item" href="/governance/calendar.html">Calendar</a></li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" style="color:#2922EB;" href="/contact/index.html">Contact</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <div class="row mt-5">
                <div class="col-3"></div>
                <div class="col-6 bg-light opacity-75  rounded-3">
                    <h4 class="text-center">Archives</h4>
                    Each of the archive ('.zip') files below contain the available 
                    agenda and minutes PDF files for that calendar year. The filenames 
                    include the date of the meeting's agenda and minutes. Dates have the 
                    format yyyy-mm-dd. For example, the filename fo the agenda for  May 26, 2022 
                    begins "agenda-2022-05-26...". Some filenames end in either "-A" or "-B",
                    which are used to distinguish between board meeting (-A) and annual meeting 
                    (-B). [I know that looks backwards; just keeps us on our toes.]
                </div>
            </div>
            <div class="row mt-5">
                <div class="col-5"></div>
                <div class="col-2 bg-light opacity-75  rounded-3">
                    <h5 class="text-center">Archive files</h5>
                    <div class="overflow-auto" style="height: 300px;">
                        <table class="table">
                            <tr>
                                <td class="archive">2021.zip</td>
                            </tr>
                            <tr>
                                <td class="archive">2020.zip</td>
                            </tr>
                            <tr>
                                <td class="archive">2019.zip</td>
                            </tr>
                            <tr>
                                <td class="archive">2018.zip</td>
                            </tr>
                            <tr>
                                <td class="archive">2017.zip</td>
                            </tr>
                            <tr>
                                <td class="archive">2016.zip</td>
                            </tr>
                            <tr>
                                <td class="archive">2015.zip</td>
                            </tr>
                            <tr>
                                <td class="archive">2014.zip</td>
                            </tr>
                            <tr>
                                <td class="archive">2013.zip</td>
                            </tr>
                            <tr>
                                <td class="archive">2012.zip</td>
                            </tr>
                            <tr>
                                <td class="archive">2011.zip</td>
                            </tr>
                            <tr>
                                <td class="archive">2010.zip</td>
                            </tr>
                            <tr>
                                <td class="archive">2009.zip</td>
                            </tr>

                        </table>
                    </div>
                </div>
            </div>
        </div>
        <script src="../assets/js/jquery-3.6.1.min.js"></script>
        <script src="../assets/js/bootstrap.bundle.min.js"></script>
        <script>
            $('td').on('click', function (e) {
                var filename = $(e.currentTarget).text();
                var url = document.location.origin + "/governance/agendas/" + filename;
                fetch(url, {
                    mode: 'no-cors'
                }).then((transfer) => {
                    return transfer.blob();                 // RETURN DATA TRANSFERED AS BLOB
                }).then((bytes) => {
                    let elm = document.createElement('a');  // CREATE A LINK ELEMENT IN DOM
                    elm.href = URL.createObjectURL(bytes);  // SET LINK ELEMENTS CONTENTS
                    elm.setAttribute('download', filename); // SET ELEMENT CREATED 'ATTRIBUTE' TO DOWNLOAD, FILENAME PARAM AUTOMATICALLY
                    elm.click();                            // TRIGGER ELEMENT TO DOWNLOAD
                }).catch((error) => {
                    console.log(error);                     // OUTPUT ERRORS, SUCH AS CORS WHEN TESTING NON LOCALLY
                })
            });
        </script>
    </body>
</html>
